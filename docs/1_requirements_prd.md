# 要件定義書 (PRD)

## 1. プロジェクト概要
オンライン対戦型テトリス。複数プレイヤーがリアルタイムに対戦。AWS上のコンテナ＋サーバーレス構成で運用コストを低減。

## 2. 機能要件
### 2.1 ユーザー管理
- ユーザーはニックネームでログイン（認証不要）
- 部屋作成／参加機能
- 部屋の一覧表示

### 2.2 ゲームルーム
- 他プレイヤーの参加状況可視化
- ゲーム開始ボタン
- チャット機能（任意）

### 2.3 テトリス対戦機能
- 自分の盤面と対戦相手の盤面表示
- ブロック操作（左／右／回転／下落）
- ライン消去時にペナルティを相手に送信
- スコア計算と勝敗判定
- ゲーム終了後のリザルト画面

### 2.4 通信
- WebSocket（Socket.IO）によるリアルタイム同期
- 再接続時の状態復元

## 3. 非機能要件
- レイテンシー：100ms以下のレスポンスを目指す
- スケーラビリティ：同時プレイヤー1000人以上対応
- 可用性：稼働率99.9%以上
- 運用コスト：月額数千円以内
- 可観測性：ログ収集 (CloudWatch)、アラート設定
- セキュリティ：DDoS保護、CORS設定

## 4. ユーザーストーリー
1. Guestユーザーとして、ルーム一覧画面で空きルームを選択して参加できる  
2. Hostユーザーとして、新規ルームを作成し、他プレイヤーを待機させられる  
3. Hostユーザーは参加者が揃ったらゲームを開始できる  
4. プレイヤーとして、操作キーでブロックを動かし、ラインを消して得点を競える  
5. ライン消去により相手にペナルティを送信し、相手の盤面にブロックを追加で落下させられる  
6. ゲーム終了後、勝者・敗者・スコアを含む結果を確認できる  

---
